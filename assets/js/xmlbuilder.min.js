(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).xmlbuilder=t()}}(function(){return function t(e,r,i){function n(o,a){if(!r[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return n(r||t)},u,u.exports,t,e,r,i)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e,r){(function(){var t,r,i,n,s,o,a={}.hasOwnProperty;t=function(t,...e){var r,i,s,o;if(n(Object.assign))Object.assign.apply(null,arguments);else for(r=0,s=e.length;r<s;r++)if(null!=(o=e[r]))for(i in o)a.call(o,i)&&(t[i]=o[i]);return t},n=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},s=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},r=function(t){return n(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},i=function(t){var e;if(r(t))return!t.length;for(e in t)if(a.call(t,e))return!1;return!0},o=function(t){var e,r;return s(t)&&(r=Object.getPrototypeOf(t))&&(e=r.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},e.exports.assign=t,e.exports.isFunction=n,e.exports.isObject=s,e.exports.isArray=r,e.exports.isEmpty=i,e.exports.isPlainObject=o}).call(this)},{}],2:[function(t,e,r){(function(){e.exports=class{constructor(t,e,r){if(this.options=t.options,this.stringify=t.stringify,null==e)throw new Error("Missing attribute name of element "+t.name);if(null==r)throw new Error("Missing attribute value for attribute "+e+" of element "+t.name);this.name=this.stringify.attName(e),this.value=this.stringify.attValue(r)}clone(){return Object.create(this)}toString(t){return this.options.writer.set(t).attribute(this)}}}).call(this)},{}],3:[function(t,e,r){(function(){var r;r=t("./XMLNode"),e.exports=class extends r{constructor(t,e){if(super(t),null==e)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(e)}clone(){return Object.create(this)}toString(t){return this.options.writer.set(t).cdata(this)}}}).call(this)},{"./XMLNode":14}],4:[function(t,e,r){(function(){var r;r=t("./XMLNode"),e.exports=class extends r{constructor(t,e){if(super(t),null==e)throw new Error("Missing comment text");this.text=this.stringify.comment(e)}clone(){return Object.create(this)}toString(t){return this.options.writer.set(t).comment(this)}}}).call(this)},{"./XMLNode":14}],5:[function(t,e,r){(function(){var r;r=t("./XMLNode"),e.exports=class extends r{constructor(t,e,r,i,n,s){if(super(t),null==e)throw new Error("Missing DTD element name");if(null==r)throw new Error("Missing DTD attribute name");if(!i)throw new Error("Missing DTD attribute type");if(!n)throw new Error("Missing DTD attribute default");if(0!==n.indexOf("#")&&(n="#"+n),!n.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(s&&!n.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(e),this.attributeName=this.stringify.attName(r),this.attributeType=this.stringify.dtdAttType(i),this.defaultValue=this.stringify.dtdAttDefault(s),this.defaultValueType=n}toString(t){return this.options.writer.set(t).dtdAttList(this)}}}).call(this)},{"./XMLNode":14}],6:[function(t,e,r){(function(){var r;r=t("./XMLNode"),e.exports=class extends r{constructor(t,e,r){if(super(t),null==e)throw new Error("Missing DTD element name");r||(r="(#PCDATA)"),Array.isArray(r)&&(r="("+r.join(",")+")"),this.name=this.stringify.eleName(e),this.value=this.stringify.dtdElementValue(r)}toString(t){return this.options.writer.set(t).dtdElement(this)}}}).call(this)},{"./XMLNode":14}],7:[function(t,e,r){(function(){var r,i;({isObject:i}=t("./Utility")),r=t("./XMLNode"),e.exports=class extends r{constructor(t,e,r,n){if(super(t),null==r)throw new Error("Missing entity name");if(null==n)throw new Error("Missing entity value");if(this.pe=!!e,this.name=this.stringify.eleName(r),i(n)){if(!n.pubID&&!n.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(n.pubID&&!n.sysID)throw new Error("System identifier is required for a public external entity");if(null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID)),null!=n.nData&&(this.nData=this.stringify.dtdNData(n.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(n)}toString(t){return this.options.writer.set(t).dtdEntity(this)}}}).call(this)},{"./Utility":1,"./XMLNode":14}],8:[function(t,e,r){(function(){var r;r=t("./XMLNode"),e.exports=class extends r{constructor(t,e,r){if(super(t),null==e)throw new Error("Missing notation name");if(!r.pubID&&!r.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(e),null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID))}toString(t){return this.options.writer.set(t).dtdNotation(this)}}}).call(this)},{"./XMLNode":14}],9:[function(t,e,r){(function(){var r,i;({isObject:i}=t("./Utility")),r=t("./XMLNode"),e.exports=class extends r{constructor(t,e,r,n){super(t),i(e)&&({version:e,encoding:r,standalone:n}=e),e||(e="1.0"),this.version=this.stringify.xmlVersion(e),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=n&&(this.standalone=this.stringify.xmlStandalone(n))}toString(t){return this.options.writer.set(t).declaration(this)}}}).call(this)},{"./Utility":1,"./XMLNode":14}],10:[function(t,e,r){(function(){var r,i,n,s,o,a;({isObject:a}=t("./Utility")),o=t("./XMLNode"),r=t("./XMLDTDAttList"),n=t("./XMLDTDEntity"),i=t("./XMLDTDElement"),s=t("./XMLDTDNotation"),e.exports=class extends o{constructor(t,e,r){super(t),this.documentObject=t,a(e)&&({pubID:e,sysID:r}=e),null==r&&([r,e]=[e,r]),null!=e&&(this.pubID=this.stringify.dtdPubID(e)),null!=r&&(this.sysID=this.stringify.dtdSysID(r))}element(t,e){var r;return r=new i(this,t,e),this.children.push(r),this}attList(t,e,i,n,s){var o;return o=new r(this,t,e,i,n,s),this.children.push(o),this}entity(t,e){var r;return r=new n(this,!1,t,e),this.children.push(r),this}pEntity(t,e){var r;return r=new n(this,!0,t,e),this.children.push(r),this}notation(t,e){var r;return r=new s(this,t,e),this.children.push(r),this}toString(t){return this.options.writer.set(t).docType(this)}ele(t,e){return this.element(t,e)}att(t,e,r,i,n){return this.attList(t,e,r,i,n)}ent(t,e){return this.entity(t,e)}pent(t,e){return this.pEntity(t,e)}not(t,e){return this.notation(t,e)}up(){return this.root()||this.documentObject}}}).call(this)},{"./Utility":1,"./XMLDTDAttList":5,"./XMLDTDElement":6,"./XMLDTDEntity":7,"./XMLDTDNotation":8,"./XMLNode":14}],11:[function(t,e,r){(function(){var r,i,n,s;({isPlainObject:s}=t("./Utility")),r=t("./XMLNode"),n=t("./XMLStringifier"),i=t("./XMLStringWriter"),e.exports=class extends r{constructor(t){super(null),t||(t={}),t.writer||(t.writer=new i),this.options=t,this.stringify=new n(t),this.isDocument=!0}end(t){var e;return t?s(t)&&(e=t,t=this.options.writer.set(e)):t=this.options.writer,t.document(this)}toString(t){return this.options.writer.set(t).document(this)}}}).call(this)},{"./Utility":1,"./XMLNode":14,"./XMLStringWriter":18,"./XMLStringifier":19}],12:[function(t,e,r){(function(){var r,i,n,s,o,a,h,l,u,c,d,p,f,m,w,y,D,L,g={}.hasOwnProperty;({isObject:D,isFunction:y,isPlainObject:L}=t("./Utility")),c=t("./XMLElement"),i=t("./XMLCData"),n=t("./XMLComment"),p=t("./XMLRaw"),w=t("./XMLText"),d=t("./XMLProcessingInstruction"),l=t("./XMLDeclaration"),u=t("./XMLDocType"),s=t("./XMLDTDAttList"),a=t("./XMLDTDEntity"),o=t("./XMLDTDElement"),h=t("./XMLDTDNotation"),r=t("./XMLAttribute"),m=t("./XMLStringifier"),f=t("./XMLStringWriter"),e.exports=class{constructor(t,e,r){var i;t||(t={}),t.writer?L(t.writer)&&(i=t.writer,t.writer=new f(i)):t.writer=new f(t),this.options=t,this.writer=t.writer,this.stringify=new m(t),this.onDataCallback=e||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}node(t,e,r){if(null==t)throw new Error("Missing node name");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node");return this.openCurrent(),t=t.valueOf(),null==e&&(e={}),e=e.valueOf(),D(e)||([r,e]=[e,r]),this.currentNode=new c(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this}element(t,e,r){return this.currentNode&&this.currentNode instanceof u?this.dtdElement(...arguments):this.node(t,e,r)}attribute(t,e){var i,n;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode");if(null!=t&&(t=t.valueOf()),D(t))for(i in t)g.call(t,i)&&(n=t[i],this.attribute(i,n));else y(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.currentNode.attributes[t]=new r(this,t,e));return this}text(t){var e;return this.openCurrent(),e=new w(this,t),this.onData(this.writer.text(e,this.currentLevel+1)),this}cdata(t){var e;return this.openCurrent(),e=new i(this,t),this.onData(this.writer.cdata(e,this.currentLevel+1)),this}comment(t){var e;return this.openCurrent(),e=new n(this,t),this.onData(this.writer.comment(e,this.currentLevel+1)),this}raw(t){var e;return this.openCurrent(),e=new p(this,t),this.onData(this.writer.raw(e,this.currentLevel+1)),this}instruction(t,e){var r,i,n,s,o;if(this.openCurrent(),null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(r=0,s=t.length;r<s;r++)i=t[r],this.instruction(i);else if(D(t))for(i in t)g.call(t,i)&&(n=t[i],this.instruction(i,n));else y(e)&&(e=e.apply()),o=new d(this,t,e),this.onData(this.writer.processingInstruction(o,this.currentLevel+1));return this}declaration(t,e,r){var i;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node");return i=new l(this,t,e,r),this.onData(this.writer.declaration(i,this.currentLevel+1)),this}doctype(t,e,r){if(this.openCurrent(),null==t)throw new Error("Missing root node name");if(this.root)throw new Error("dtd() must come before the root node");return this.currentNode=new u(this,e,r),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this}dtdElement(t,e){var r;return this.openCurrent(),r=new o(this,t,e),this.onData(this.writer.dtdElement(r,this.currentLevel+1)),this}attList(t,e,r,i,n){var o;return this.openCurrent(),o=new s(this,t,e,r,i,n),this.onData(this.writer.dtdAttList(o,this.currentLevel+1)),this}entity(t,e){var r;return this.openCurrent(),r=new a(this,!1,t,e),this.onData(this.writer.dtdEntity(r,this.currentLevel+1)),this}pEntity(t,e){var r;return this.openCurrent(),r=new a(this,!0,t,e),this.onData(this.writer.dtdEntity(r,this.currentLevel+1)),this}notation(t,e){var r;return this.openCurrent(),r=new h(this,t,e),this.onData(this.writer.dtdNotation(r,this.currentLevel+1)),this}up(){if(this.currentLevel<0)throw new Error("The document node has no parent");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this}end(){for(;this.currentLevel>=0;)this.up();return this.onEnd()}openCurrent(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)}openNode(t){if(!t.isOpen)return!this.root&&0===this.currentLevel&&t instanceof c&&(this.root=t),this.onData(this.writer.openNode(t,this.currentLevel)),t.isOpen=!0}closeNode(t){if(!t.isClosed)return this.onData(this.writer.closeNode(t,this.currentLevel)),t.isClosed=!0}onData(t){return this.documentStarted=!0,this.onDataCallback(t)}onEnd(){return this.documentCompleted=!0,this.onEndCallback()}ele(){return this.element(...arguments)}nod(t,e,r){return this.node(t,e,r)}txt(t){return this.text(t)}dat(t){return this.cdata(t)}com(t){return this.comment(t)}ins(t,e){return this.instruction(t,e)}dec(t,e,r){return this.declaration(t,e,r)}dtd(t,e,r){return this.doctype(t,e,r)}e(t,e,r){return this.element(t,e,r)}n(t,e,r){return this.node(t,e,r)}t(t){return this.text(t)}d(t){return this.cdata(t)}c(t){return this.comment(t)}r(t){return this.raw(t)}i(t,e){return this.instruction(t,e)}att(){return this.currentNode&&this.currentNode instanceof u?this.attList(...arguments):this.attribute(...arguments)}a(){return this.currentNode&&this.currentNode instanceof u?this.attList(...arguments):this.attribute(...arguments)}ent(t,e){return this.entity(t,e)}pent(t,e){return this.pEntity(t,e)}not(t,e){return this.notation(t,e)}}}).call(this)},{"./Utility":1,"./XMLAttribute":2,"./XMLCData":3,"./XMLComment":4,"./XMLDTDAttList":5,"./XMLDTDElement":6,"./XMLDTDEntity":7,"./XMLDTDNotation":8,"./XMLDeclaration":9,"./XMLDocType":10,"./XMLElement":13,"./XMLProcessingInstruction":15,"./XMLRaw":16,"./XMLStringWriter":18,"./XMLStringifier":19,"./XMLText":20}],13:[function(t,e,r){(function(){var r,i,n,s,o={}.hasOwnProperty;({isObject:s,isFunction:n}=t("./Utility")),i=t("./XMLNode"),r=t("./XMLAttribute"),e.exports=class extends i{constructor(t,e,r){if(super(t),null==e)throw new Error("Missing element name");this.name=this.stringify.eleName(e),this.attributes={},null!=r&&this.attribute(r),t.isDocument&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this)}clone(){var t,e,r,i;(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attributes={},i=this.attributes;for(e in i)o.call(i,e)&&(t=i[e],r.attributes[e]=t.clone());return r.children=[],this.children.forEach(function(t){var e;return e=t.clone(),e.parent=r,r.children.push(e)}),r}attribute(t,e){var i,a;if(null!=t&&(t=t.valueOf()),s(t))for(i in t)o.call(t,i)&&(a=t[i],this.attribute(i,a));else n(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.attributes[t]=new r(this,t,e));return this}removeAttribute(t){var e,r,i;if(null==t)throw new Error("Missing attribute name");if(t=t.valueOf(),Array.isArray(t))for(r=0,i=t.length;r<i;r++)e=t[r],delete this.attributes[e];else delete this.attributes[t];return this}toString(t){return this.options.writer.set(t).element(this)}att(t,e){return this.attribute(t,e)}a(t,e){return this.attribute(t,e)}}}).call(this)},{"./Utility":1,"./XMLAttribute":2,"./XMLNode":14}],14:[function(t,e,r){(function(){var r,i,n,s,o,a,h,l,u,c,d,p={}.hasOwnProperty,f=[].splice;({isObject:d,isFunction:c,isEmpty:u}=t("./Utility")),o=null,r=null,i=null,n=null,s=null,h=null,l=null,a=null,e.exports=class{constructor(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],o||(o=t("./XMLElement"),r=t("./XMLCData"),i=t("./XMLComment"),n=t("./XMLDeclaration"),s=t("./XMLDocType"),h=t("./XMLRaw"),l=t("./XMLText"),a=t("./XMLProcessingInstruction"))}element(t,e,r){var i,n,s,o,a,h,l,f,m;if(h=null,null==e&&(e={}),e=e.valueOf(),d(e)||([r,e]=[e,r]),null!=t&&(t=t.valueOf()),Array.isArray(t))for(s=0,l=t.length;s<l;s++)n=t[s],h=this.element(n);else if(c(t))h=this.element(t.apply());else if(d(t)){for(a in t)if(p.call(t,a))if(m=t[a],c(m)&&(m=m.apply()),d(m)&&u(m)&&(m=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))h=this.attribute(a.substr(this.stringify.convertAttKey.length),m);else if(!this.options.separateArrayItems&&Array.isArray(m))for(o=0,f=m.length;o<f;o++)n=m[o],(i={})[a]=n,h=this.element(i);else d(m)?(h=this.element(a)).element(m):h=this.element(a,m)}else h=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),r):this.node(t,e,r);if(null==h)throw new Error("Could not create any elements with: "+t);return h}insertBefore(t,e,r){var i,n,s;if(this.isRoot)throw new Error("Cannot insert elements at root level");return n=this.parent.children.indexOf(this),s=this.parent.children.splice(n),i=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,s),i}insertAfter(t,e,r){var i,n,s;if(this.isRoot)throw new Error("Cannot insert elements at root level");return n=this.parent.children.indexOf(this),s=this.parent.children.splice(n+1),i=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,s),i}remove(){var t;if(this.isRoot)throw new Error("Cannot remove the root element");return t=this.parent.children.indexOf(this),f.apply(this.parent.children,[t,t-t+1].concat([])),this.parent}node(t,e,r){var i;return null!=t&&(t=t.valueOf()),e||(e={}),e=e.valueOf(),d(e)||([r,e]=[e,r]),i=new o(this,t,e),null!=r&&i.text(r),this.children.push(i),i}text(t){var e;return e=new l(this,t),this.children.push(e),this}cdata(t){var e;return e=new r(this,t),this.children.push(e),this}comment(t){var e;return e=new i(this,t),this.children.push(e),this}commentBefore(t){var e,r;return e=this.parent.children.indexOf(this),r=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,r),this}commentAfter(t){var e,r;return e=this.parent.children.indexOf(this),r=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,r),this}raw(t){var e;return e=new h(this,t),this.children.push(e),this}instruction(t,e){var r,i,n,s,o;if(null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(s=0,o=t.length;s<o;s++)r=t[s],this.instruction(r);else if(d(t))for(r in t)p.call(t,r)&&(i=t[r],this.instruction(r,i));else c(e)&&(e=e.apply()),n=new a(this,t,e),this.children.push(n);return this}instructionBefore(t,e){var r,i;return r=this.parent.children.indexOf(this),i=this.parent.children.splice(r),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this}instructionAfter(t,e){var r,i;return r=this.parent.children.indexOf(this),i=this.parent.children.splice(r+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this}declaration(t,e,r){var i,s;return i=this.document(),s=new n(i,t,e,r),i.children[0]instanceof n?i.children[0]=s:i.children.unshift(s),i.root()||i}doctype(t,e){var r,i,n,o,a,h,l,u,c;for(r=this.document(),i=new s(r,t,e),n=o=0,h=(u=r.children).length;o<h;n=++o)if(u[n]instanceof s)return r.children[n]=i,i;for(n=a=0,l=(c=r.children).length;a<l;n=++a)if(c[n].isRoot)return r.children.splice(n,0,i),i;return r.children.push(i),i}up(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent}root(){var t;for(t=this;t;){if(t.isDocument)return t.rootObject;if(t.isRoot)return t;t=t.parent}}document(){var t;for(t=this;t;){if(t.isDocument)return t;t=t.parent}}end(t){return this.document().end(t)}prev(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node");return this.parent.children[t-1]}next(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[t+1]}importDocument(t){var e;return e=t.root().clone(),e.parent=this,e.isRoot=!1,this.children.push(e),this}ele(t,e,r){return this.element(t,e,r)}nod(t,e,r){return this.node(t,e,r)}txt(t){return this.text(t)}dat(t){return this.cdata(t)}com(t){return this.comment(t)}ins(t,e){return this.instruction(t,e)}doc(){return this.document()}dec(t,e,r){return this.declaration(t,e,r)}dtd(t,e){return this.doctype(t,e)}e(t,e,r){return this.element(t,e,r)}n(t,e,r){return this.node(t,e,r)}t(t){return this.text(t)}d(t){return this.cdata(t)}c(t){return this.comment(t)}r(t){return this.raw(t)}i(t,e){return this.instruction(t,e)}u(){return this.up()}importXMLBuilder(t){return this.importDocument(t)}}}).call(this)},{"./Utility":1,"./XMLCData":3,"./XMLComment":4,"./XMLDeclaration":9,"./XMLDocType":10,"./XMLElement":13,"./XMLProcessingInstruction":15,"./XMLRaw":16,"./XMLText":20}],15:[function(t,e,r){(function(){var r;r=t("./XMLNode"),e.exports=class extends r{constructor(t,e,r){if(super(t),null==e)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(e),r&&(this.value=this.stringify.insValue(r))}clone(){return Object.create(this)}toString(t){return this.options.writer.set(t).processingInstruction(this)}}}).call(this)},{"./XMLNode":14}],16:[function(t,e,r){(function(){var r;r=t("./XMLNode"),e.exports=class extends r{constructor(t,e){if(super(t),null==e)throw new Error("Missing raw text");this.value=this.stringify.raw(e)}clone(){return Object.create(this)}toString(t){return this.options.writer.set(t).raw(this)}}}).call(this)},{"./XMLNode":14}],17:[function(t,e,r){(function(){var r,i,n,s,o,a,h,l,u,c,d,p,f,m={}.hasOwnProperty;h=t("./XMLDeclaration"),l=t("./XMLDocType"),r=t("./XMLCData"),i=t("./XMLComment"),u=t("./XMLElement"),d=t("./XMLRaw"),p=t("./XMLText"),c=t("./XMLProcessingInstruction"),n=t("./XMLDTDAttList"),s=t("./XMLDTDElement"),o=t("./XMLDTDEntity"),a=t("./XMLDTDNotation"),f=t("./XMLWriterBase"),e.exports=class extends f{constructor(t,e){super(e),this.stream=t}document(t){var e,r,n,s,o,a,u,d;for(r=0,s=(a=t.children).length;r<s;r++)(e=a[r]).isLastRootNode=!1;for(t.children[t.children.length-1].isLastRootNode=!0,d=[],n=0,o=(u=t.children).length;n<o;n++)switch(e=u[n],!1){case!(e instanceof h):d.push(this.declaration(e));break;case!(e instanceof l):d.push(this.docType(e));break;case!(e instanceof i):d.push(this.comment(e));break;case!(e instanceof c):d.push(this.processingInstruction(e));break;default:d.push(this.element(e))}return d}attribute(t){return this.stream.write(" "+t.name+'="'+t.value+'"')}cdata(t,e){return this.stream.write(this.space(e)+"<![CDATA["+t.text+"]]>"+this.endline(t))}comment(t,e){return this.stream.write(this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.endline(t))}declaration(t,e){return this.stream.write(this.space(e)),this.stream.write('<?xml version="'+t.version+'"'),null!=t.encoding&&this.stream.write(' encoding="'+t.encoding+'"'),null!=t.standalone&&this.stream.write(' standalone="'+t.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(t))}docType(t,e){var h,l,u,d;if(e||(e=0),this.stream.write(this.space(e)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t)),l=0,u=(d=t.children).length;l<u;l++)switch(h=d[l],!1){case!(h instanceof n):this.dtdAttList(h,e+1);break;case!(h instanceof s):this.dtdElement(h,e+1);break;case!(h instanceof o):this.dtdEntity(h,e+1);break;case!(h instanceof a):this.dtdNotation(h,e+1);break;case!(h instanceof r):this.cdata(h,e+1);break;case!(h instanceof i):this.comment(h,e+1);break;case!(h instanceof c):this.processingInstruction(h,e+1);break;default:throw new Error("Unknown DTD node type: "+h.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(t))}element(t,e){var n,s,o,a,h,l,f,w;e||(e=0),w=this.space(e),this.stream.write(w+"<"+t.name),l=t.attributes;for(h in l)m.call(l,h)&&(n=l[h],this.attribute(n));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?this.stream.write("></"+t.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)this.stream.write(">"),this.stream.write(t.children[0].value),this.stream.write("</"+t.name+">");else{for(this.stream.write(">"+this.newline),o=0,a=(f=t.children).length;o<a;o++)switch(s=f[o],!1){case!(s instanceof r):this.cdata(s,e+1);break;case!(s instanceof i):this.comment(s,e+1);break;case!(s instanceof u):this.element(s,e+1);break;case!(s instanceof d):this.raw(s,e+1);break;case!(s instanceof p):this.text(s,e+1);break;case!(s instanceof c):this.processingInstruction(s,e+1);break;default:throw new Error("Unknown XML node type: "+s.constructor.name)}this.stream.write(w+"</"+t.name+">")}return this.stream.write(this.endline(t))}processingInstruction(t,e){return this.stream.write(this.space(e)+"<?"+t.target),t.value&&this.stream.write(" "+t.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(t))}raw(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))}text(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))}dtdAttList(t,e){return this.stream.write(this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType),"#DEFAULT"!==t.defaultValueType&&this.stream.write(" "+t.defaultValueType),t.defaultValue&&this.stream.write(' "'+t.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))}dtdElement(t,e){return this.stream.write(this.space(e)+"<!ELEMENT "+t.name+" "+t.value),this.stream.write(this.spacebeforeslash+">"+this.endline(t))}dtdEntity(t,e){return this.stream.write(this.space(e)+"<!ENTITY"),t.pe&&this.stream.write(" %"),this.stream.write(" "+t.name),t.value?this.stream.write(' "'+t.value+'"'):(t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.nData&&this.stream.write(" NDATA "+t.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(t))}dtdNotation(t,e){return this.stream.write(this.space(e)+"<!NOTATION "+t.name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.pubID?this.stream.write(' PUBLIC "'+t.pubID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))}endline(t){return t.isLastRootNode?"":this.newline}}}).call(this)},{"./XMLCData":3,"./XMLComment":4,"./XMLDTDAttList":5,"./XMLDTDElement":6,"./XMLDTDEntity":7,"./XMLDTDNotation":8,"./XMLDeclaration":9,"./XMLDocType":10,"./XMLElement":13,"./XMLProcessingInstruction":15,"./XMLRaw":16,"./XMLText":20,"./XMLWriterBase":21}],18:[function(t,e,r){(function(){var r,i,n,s,o,a,h,l,u,c,d,p,f,m={}.hasOwnProperty;h=t("./XMLDeclaration"),l=t("./XMLDocType"),r=t("./XMLCData"),i=t("./XMLComment"),u=t("./XMLElement"),d=t("./XMLRaw"),p=t("./XMLText"),c=t("./XMLProcessingInstruction"),n=t("./XMLDTDAttList"),s=t("./XMLDTDElement"),o=t("./XMLDTDEntity"),a=t("./XMLDTDNotation"),f=t("./XMLWriterBase"),e.exports=class extends f{constructor(t){super(t)}document(t){var e,r,n,s,o;for(this.textispresent=!1,s="",r=0,n=(o=t.children).length;r<n;r++)e=o[r],s+=function(){switch(!1){case!(e instanceof h):return this.declaration(e);case!(e instanceof l):return this.docType(e);case!(e instanceof i):return this.comment(e);case!(e instanceof c):return this.processingInstruction(e);default:return this.element(e,0)}}.call(this);return this.pretty&&s.slice(-this.newline.length)===this.newline&&(s=s.slice(0,-this.newline.length)),s}attribute(t){return" "+t.name+'="'+t.value+'"'}cdata(t,e){return this.space(e)+"<![CDATA["+t.text+"]]>"+this.newline}comment(t,e){return this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.newline}declaration(t,e){var r;return r=this.space(e),r+='<?xml version="'+t.version+'"',null!=t.encoding&&(r+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(r+=' standalone="'+t.standalone+'"'),r+=this.spacebeforeslash+"?>",r+=this.newline}docType(t,e){var h,l,u,d,p;if(e||(e=0),d=this.space(e),d+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?d+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(d+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(d+=" [",d+=this.newline,l=0,u=(p=t.children).length;l<u;l++)h=p[l],d+=function(){switch(!1){case!(h instanceof n):return this.dtdAttList(h,e+1);case!(h instanceof s):return this.dtdElement(h,e+1);case!(h instanceof o):return this.dtdEntity(h,e+1);case!(h instanceof a):return this.dtdNotation(h,e+1);case!(h instanceof r):return this.cdata(h,e+1);case!(h instanceof i):return this.comment(h,e+1);case!(h instanceof c):return this.processingInstruction(h,e+1);default:throw new Error("Unknown DTD node type: "+h.constructor.name)}}.call(this);d+="]"}return d+=this.spacebeforeslash+">",d+=this.newline}element(t,e){var n,s,o,a,h,l,f,w,y,D,L,g,v;e||(e=0),v=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),w="",w+=(g=this.space(e))+"<"+t.name,y=t.attributes;for(f in y)m.call(y,f)&&(n=y[f],w+=this.attribute(n));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?w+="></"+t.name+">"+this.newline:w+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)w+=">",w+=t.children[0].value,w+="</"+t.name+">"+this.newline;else{if(this.dontprettytextnodes)for(o=0,h=(D=t.children).length;o<h;o++)if(null!=(s=D[o]).value){this.textispresent++,v=!0;break}for(this.textispresent&&(this.newline="",this.pretty=!1,g=this.space(e)),w+=">"+this.newline,a=0,l=(L=t.children).length;a<l;a++)s=L[a],w+=function(){switch(!1){case!(s instanceof r):return this.cdata(s,e+1);case!(s instanceof i):return this.comment(s,e+1);case!(s instanceof u):return this.element(s,e+1);case!(s instanceof d):return this.raw(s,e+1);case!(s instanceof p):return this.text(s,e+1);case!(s instanceof c):return this.processingInstruction(s,e+1);default:throw new Error("Unknown XML node type: "+s.constructor.name)}}.call(this);v&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),w+=g+"</"+t.name+">"+this.newline}return w}processingInstruction(t,e){var r;return r=this.space(e)+"<?"+t.target,t.value&&(r+=" "+t.value),r+=this.spacebeforeslash+"?>"+this.newline}raw(t,e){return this.space(e)+t.value+this.newline}text(t,e){return this.space(e)+t.value+this.newline}dtdAttList(t,e){var r;return r=this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(r+=" "+t.defaultValueType),t.defaultValue&&(r+=' "'+t.defaultValue+'"'),r+=this.spacebeforeslash+">"+this.newline}dtdElement(t,e){return this.space(e)+"<!ELEMENT "+t.name+" "+t.value+this.spacebeforeslash+">"+this.newline}dtdEntity(t,e){var r;return r=this.space(e)+"<!ENTITY",t.pe&&(r+=" %"),r+=" "+t.name,t.value?r+=' "'+t.value+'"':(t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),t.nData&&(r+=" NDATA "+t.nData)),r+=this.spacebeforeslash+">"+this.newline}dtdNotation(t,e){var r;return r=this.space(e)+"<!NOTATION "+t.name,t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?r+=' PUBLIC "'+t.pubID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),r+=this.spacebeforeslash+">"+this.newline}openNode(t,e){var r,i,n,s;if(e||(e=0),t instanceof u){n=this.space(e)+"<"+t.name,s=t.attributes;for(i in s)m.call(s,i)&&(r=s[i],n+=this.attribute(r));return n+=(t.children?">":"/>")+this.newline}return n=this.space(e)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?n+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(n+=' SYSTEM "'+t.sysID+'"'),n+=(t.children?" [":">")+this.newline}closeNode(t,e){switch(e||(e=0),!1){case!(t instanceof u):return this.space(e)+"</"+t.name+">"+this.newline;case!(t instanceof l):return this.space(e)+"]>"+this.newline}}}}).call(this)},{"./XMLCData":3,"./XMLComment":4,"./XMLDTDAttList":5,"./XMLDTDElement":6,"./XMLDTDEntity":7,"./XMLDTDNotation":8,"./XMLDeclaration":9,"./XMLDocType":10,"./XMLElement":13,"./XMLProcessingInstruction":15,"./XMLRaw":16,"./XMLText":20,"./XMLWriterBase":21}],19:[function(t,e,r){(function(){var t={}.hasOwnProperty;e.exports=function(){class e{constructor(e){var r,i,n;this.assertLegalChar=this.assertLegalChar.bind(this),e||(e={}),this.noDoubleEncoding=e.noDoubleEncoding,i=e.stringify||{};for(r in i)t.call(i,r)&&(n=i[r],this[r]=n)}eleName(t){return t=""+t||"",this.assertLegalChar(t)}eleText(t){return t=""+t||"",this.assertLegalChar(this.elEscape(t))}cdata(t){return t=""+t||"",t=t.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t)}comment(t){if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)}raw(t){return""+t||""}attName(t){return t=""+t||""}attValue(t){return t=""+t||"",this.attEscape(t)}insTarget(t){return""+t||""}insValue(t){if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return t}xmlVersion(t){if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t}xmlEncoding(t){if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-]|-)*$/))throw new Error("Invalid encoding: "+t);return t}xmlStandalone(t){return t?"yes":"no"}dtdPubID(t){return""+t||""}dtdSysID(t){return""+t||""}dtdElementValue(t){return""+t||""}dtdAttType(t){return""+t||""}dtdAttDefault(t){return null!=t?""+t||"":t}dtdEntityValue(t){return""+t||""}dtdNData(t){return""+t||""}assertLegalChar(t){var e;if(e=t.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error(`Invalid character in string: ${t} at index ${e.index}`);return t}elEscape(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")}attEscape(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}}return e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e}()}).call(this)},{}],20:[function(t,e,r){(function(){var r;r=t("./XMLNode"),e.exports=class extends r{constructor(t,e){if(super(t),null==e)throw new Error("Missing element text");this.value=this.stringify.eleText(e)}clone(){return Object.create(this)}toString(t){return this.options.writer.set(t).text(this)}}}).call(this)},{"./XMLNode":14}],21:[function(t,e,r){(function(){var t={}.hasOwnProperty;e.exports=class{constructor(e){var r,i,n,s,o,a,h,l,u;e||(e={}),this.pretty=e.pretty||!1,this.allowEmpty=null!=(i=e.allowEmpty)&&i,this.pretty?(this.indent=null!=(n=e.indent)?n:"  ",this.newline=null!=(s=e.newline)?s:"\n",this.offset=null!=(o=e.offset)?o:0,this.dontprettytextnodes=null!=(a=e.dontprettytextnodes)?a:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=null!=(h=e.spacebeforeslash)?h:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,l=e.writer||{};for(r in l)t.call(l,r)&&(u=l[r],this[r]=u)}set(e){var r,i,n;e||(e={}),"pretty"in e&&(this.pretty=e.pretty),"allowEmpty"in e&&(this.allowEmpty=e.allowEmpty),this.pretty?(this.indent="indent"in e?e.indent:"  ",this.newline="newline"in e?e.newline:"\n",this.offset="offset"in e?e.offset:0,this.dontprettytextnodes="dontprettytextnodes"in e?e.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in e?e.spacebeforeslash:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,i=e.writer||{};for(r in i)t.call(i,r)&&(n=i[r],this[r]=n);return this}space(t){var e;return this.pretty&&(e=(t||0)+this.offset+1)>0?new Array(e).join(this.indent):""}}}).call(this)},{}],22:[function(t,e,r){(function(){var r,i,n,s,o,a;({assign:o,isFunction:a}=t("./Utility")),r=t("./XMLDocument"),i=t("./XMLDocumentCB"),s=t("./XMLStringWriter"),n=t("./XMLStreamWriter"),e.exports.create=function(t,e,i,n){var s,a;if(null==t)throw new Error("Root element needs a name");return n=o({},e,i,n),s=new r(n),a=s.element(t),n.headless||(s.declaration(n),null==n.pubID&&null==n.sysID||s.doctype(n)),a},e.exports.begin=function(t,e,n){return a(t)&&([e,n]=[t,e],t={}),e?new i(t,e,n):new r(t)},e.exports.stringWriter=function(t){return new s(t)},e.exports.streamWriter=function(t,e){return new n(t,e)}}).call(this)},{"./Utility":1,"./XMLDocument":11,"./XMLDocumentCB":12,"./XMLStreamWriter":17,"./XMLStringWriter":18}]},{},[22])(22)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1]);
